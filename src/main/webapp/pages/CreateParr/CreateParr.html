<wm-partial name="partial1">
    <wm-container name="CreateParrContainer" on-load="CreateParrContainerLoad(widget)">
        <wm-message name="errormessage" type="error" show="bind:Variables.errorMsg.dataSet.dataValue ? true : false" caption="bind:Variables.errorMsg.dataSet.dataValue" class="errormessage" deferload="false" hideclose="true" width="100%"></wm-message>
        <wm-message name="successmessage" show="bind:Variables.successMessage.dataSet.dataValue ? true : false" caption="bind:Variables.successMessage.dataSet.dataValue" class="successmessage" hideclose="true" width="100%"></wm-message>
        <wm-container name="container9" on-load="container9Load(widget)">
            <!--<wm-label padding="0.5em unset 0.2em unset" name="label11" caption="Create PARR" fontsize="15" margin="unset unset unset 2.3em" class="parrBorder" color="#000" fontunit="px"></wm-label>-->
            <h3><b>Create PARR</b></h3>
        </wm-container>
        <!--<wm-label padding="0.4em 0.5em 0.2em unset" name="label13" caption="PARR Details:" margin="unset unset unset 2.5em" class="parrDeatailsLine" fontsize="14" textalign="left"></wm-label>-->
        <h4 class="subHeadingLabel"><b>PARR Details</b></h4>
    </wm-container>
    <wm-layoutgrid name="layoutgrid1" margin="0 0 30px 0">
        <wm-gridrow name="gridrow1" padding="1em unset unset 2.5em">
            <wm-gridcolumn columnwidth="3" name="gridcolumn1" padding="unset 25px unset unset">
                <wm-layoutgrid name="layoutgrid7">
                    <wm-gridrow name="gridrow11">
                        <wm-gridcolumn columnwidth="4" name="gridcolumn21_1" width="100px" style="min-width: 100px;">
                            <wm-label padding="5px 10px 5px 0" name="label2" caption="PARR Total*" color="#6e6d6a"></wm-label>
                        </wm-gridcolumn>
                        <wm-gridcolumn columnwidth="8" name="gridcolumn22">
                            <wm-text name="ParrTotal" datavalue="bind:Variables.CreatePaymentArrangement.dataSet.amount | toCurrency: '$': '2'" required="true" type="number" placeholder="" on-change="ParrTotalChange($event, widget, newVal, oldVal)" width="87%"></wm-text>
                        </wm-gridcolumn>
                    </wm-gridrow>
                </wm-layoutgrid>
            </wm-gridcolumn>
            <wm-gridcolumn columnwidth="9" name="gridcolumn20_2">
                <wm-layoutgrid name="layoutgrid8">
                    <wm-gridrow name="gridrow13">
                        <wm-gridcolumn columnwidth="1" name="gridcolumn25" style="min-width: 82px;">
                            <wm-label padding="5px 10px 5px 5px" name="label5" caption="Recurrence*" fontsize="14" color="#6e6d6a"></wm-label>
                        </wm-gridcolumn>
                        <wm-gridcolumn columnwidth="11" name="gridcolumn26">
                            <wm-select width="20%" name="RecurrenceDropdown" placeholder="Select" dataset="bind:Variables.RecurrenceModel.dataSet" datafield="dataValue" textalign="left" datavalue="bind:Variables.CreatePaymentArrangement.dataSet.recurrence" displayfield="name" on-change="RecurrenceDropdownChange($event, widget, newVal, oldVal)"></wm-select>
                        </wm-gridcolumn>
                    </wm-gridrow>
                </wm-layoutgrid>
            </wm-gridcolumn>
        </wm-gridrow>
    </wm-layoutgrid>
    <h4 class="subHeadingLabel"><b>Installment Details</b></h4>
    <!--<wm-label padding="1em 0.5em 0.5em unset" name="label3_1" caption="Installment Details:" margin="unset unset unset 2.5em" class="installmentDetailsLine"></wm-label>-->
    <wm-layoutgrid name="layoutgrid12">
        <wm-gridrow name="gridrow16_1" padding="1em unset unset 2.5em">
            <wm-gridcolumn columnwidth="12" name="gridcolumn34_1">
                <wm-layoutgrid name="layoutgrid13">
                    <wm-gridrow name="gridrow18">
                        <wm-gridcolumn columnwidth="6" style="display: flex;" name="gridcolumn8">
                            <wm-gridcolumn columnwidth="1" name="gridcolumn38_1" class="summary-col-width-mediuminstallBAN" width="155px">
                                <wm-label padding="5px 12px 5px 0" width="133px" name="label10" caption="Installment BANs" color="#6e6d6a"></wm-label>
                            </wm-gridcolumn>
                            <wm-gridcolumn name="gridcolumn39">
                                <wm-list listclass="list-group" itemclass="list-group-item" template="true" itemsperrow="xs-1 sm-1 md-1 lg-1" class="media-list selectBan fix" name="selectBanParrList1" dataset="bind:Variables.installmentBANCreateParr.dataSet" navigation="None">
                                    <wm-listtemplate layout="inline" name="listtemplate1">
                                        <wm-container class="media-left" name="container10" width="0.5%">
                                            <wm-layoutgrid name="layoutgrid10">
                                                <wm-gridrow name="gridrow14_1">
                                                    <wm-gridcolumn columnwidth="6" name="gridcolumn28" padding="0.2em unset unset unset">
                                                        <wm-picture width="3pt" height="3pt" name="Picture" shape="circle" class="media-object" pictureplaceholder="resources/images/imagelists/bullet.png"></wm-picture>
                                                    </wm-gridcolumn>
                                                </wm-gridrow>
                                            </wm-layoutgrid>
                                        </wm-container>
                                        <wm-container class="media-body" name="container11" width="45%">
                                            <wm-layoutgrid name="layoutgrid5_1" width="115%">
                                                <wm-gridrow name="gridrow8">
                                                    <wm-gridcolumn columnwidth="10" name="gridcolumn20_1" horizontalalign="left">
                                                        <wm-label name="banValue" caption="bind:Variables.installmentBANCreateParr.dataSet[$i].banName" margin="-5px unset unset unset"></wm-label>
                                                    </wm-gridcolumn>
                                                </wm-gridrow>
                                            </wm-layoutgrid>
                                        </wm-container>
                                    </wm-listtemplate>
                                </wm-list>
                            </wm-gridcolumn>
                            <wm-gridcolumn name="gridcolumn42">
                                <wm-button class="btn-default" caption="Select BANs" type="button" margin="unset 0.5em unset 1.5em" name="button2_1" on-click="Widgets.selectBANdialog.open()" textalign="center"></wm-button>
                            </wm-gridcolumn>
                        </wm-gridcolumn>
                        <wm-gridcolumn columnwidth="6" style="display: flex;" name="gridcolumn14">
                            <wm-gridcolumn name="gridcolumn24_1" width="26%" style="min-width: 135px;">
                                <wm-label padding="5px" name="label8" caption="Installment type*" color="#6e6d6a"></wm-label>
                            </wm-gridcolumn>
                            <wm-gridcolumn name="gridcolumn25_1" width="42%" style="min-width: 200px;" class="radioBtnGrid">
                                <wm-radioset height="auto" name="InstallmentOptionRadio" layout="inline" dataset="bind:Variables.InstallmentOptions.dataSet" datavalue="bind:Variables.InstallmentOption.dataSet" on-change="InstallmentOptionRadioChange($event, widget, newVal, oldVal)"
                                    datafield="dataValue" displayfield="name" disabled="bind:Widgets.RecurrenceDropdown.datavalue == undefined || Widgets.ParrTotal.datavalue == undefined" readonly="false"></wm-radioset>
                            </wm-gridcolumn>
                            <wm-gridcolumn name="gridcolumn30">
                                <wm-composite name="composite8">
                                    <wm-container class="col-md-9" name="container9_1">
                                        <wm-composite name="composite7">
                                            <wm-container class="col-md-9" name="container8">
                                                <wm-text name="noOfInstlmnt" datavalue="bind:Variables.NoOfInstallments.dataSet.dataValue" type="number" placeholder="" on-change="noOfInstlmntChange($event, widget, newVal, oldVal)" on-mouseleave="noOfInstlmntMouseleave($event, widget)" show="true" disabled="bind:Widgets.InstallmentOptionRadio.datavalue !='NoOfInstallments'"
                                                    width="95%" style="min-width: 140px;"></wm-text>
                                            </wm-container>
                                        </wm-composite>
                                        <wm-text name="amountPerInstlmnt" datavalue="bind:Variables.AmountPerInstallment.dataSet.dataValue" type="number" placeholder="" disabled="bind:Widgets.InstallmentOptionRadio.datavalue != 'AmtPerInstallment'" width="70%"></wm-text>
                                    </wm-container>
                                </wm-composite>
                            </wm-gridcolumn>
                            <wm-gridcolumn name="gridcolumn18_1"></wm-gridcolumn>
                        </wm-gridcolumn>
                    </wm-gridrow>
                    <wm-gridrow name="gridrow19" padding="unset unset 1em unset">
                        <wm-gridcolumn columnwidth="6" name="gridcolumn40"></wm-gridcolumn>
                        <wm-gridcolumn columnwidth="6" name="gridcolumn41" horizontalalign="right">
                            <!--<wm-button class="secondaryButton" caption="Clear" type="button" margin="unset 0.5em" name="ClearButton" on-click="ClearButtonClick($event, widget)"></wm-button>-->
                            <wm-button class="secondaryButton" id="cancelButton" caption="Cancel" type="button" margin="unset 0.5em" name="CancelButton" on-click="CancelInstallmentScheduleClick($event, widget)"></wm-button>
                            <!--<wm-button caption="Create Installment Schedule" type="button" class="primaryButton" margin="unset 0.5em" name="createInstalmntSchedule" on-click="createInstalmntScheduleClick($event, widget)" show="true" disabled="bind:( Widgets.noOfInstlmnt.datavalue == undefined || Widgets.noOfInstlmnt.datavalue == 0) &amp;&amp; (Widgets.amountPerInstlmnt.datavalue == undefined || Widgets.amountPerInstlmnt.datavalue  ==0)"></wm-button>-->
                            <wm-button caption="Create Installment Schedule" type="button" class="btn-default" margin="unset 0.5em" name="createInstalmntSchedule" on-click="createInstalmntScheduleClick($event, widget)" show="true"></wm-button>
                        </wm-gridcolumn>
                    </wm-gridrow>
                </wm-layoutgrid>
            </wm-gridcolumn>
        </wm-gridrow>
    </wm-layoutgrid>
    <!--<wm-container name="container11" margin="unset unset unset 2em">-->
    <wm-layoutgrid name="layoutgrid2"></wm-layoutgrid>
    <!-- </wm-container>-->
    <wm-dialog dialogtype="design-dialog" modal="true" title="Select BAN'(s)" iconclass="wi wi-file-text" name="selectBANdialog" width="55%" height="45%">
        <wm-table name="selectBanParrTable1" title="" dataset="bind:Variables.getEntityBanDetails.dataSet" navigation="None" radioselect="false" multiselect="true" show="true">
            <wm-table-column binding="banId" caption="BAN" edit-widget-type="text" type="string" show="true" readonly="false"></wm-table-column>
            <wm-table-column binding="banName" caption="Ban Name" edit-widget-type="text" type="string" show="true" readonly="false"></wm-table-column>
            <wm-table-column binding="banOverdueAmount" caption="Total OD" edit-widget-type="text" type="string" show="true" readonly="false"></wm-table-column>
            <wm-table-column binding="banArAmount" caption="Total AR" edit-widget-type="text" type="string" show="true" readonly="false"></wm-table-column>
            <wm-table-column binding="banStatus" caption="Status" edit-widget-type="text" type="string" show="true" readonly="false"></wm-table-column>
            <wm-table-column binding="suppresionFlag" caption="Suppress Indicator" edit-widget-type="text" type="string" show="true" readonly="false"></wm-table-column>
            <wm-table-column binding="disputeFlag" caption="Dispute Indicator" edit-widget-type="text" type="string" show="true" readonly="false"></wm-table-column>
            <wm-table-column binding="entityId" caption="Entity Id" edit-widget-type="text" type="string" pcdisplay="false" show="true" readonly="false"></wm-table-column>
        </wm-table>
        <wm-button class="primaryButton" caption="Submit" type="button" style="float: right;" name="SubmitBan" on-click="SubmitBanClick($event, widget)" iconposition="right"></wm-button>
    </wm-dialog>
    <wm-container name="container9" show="bind:Variables.isCreateScheduleClicked.dataSet.datavalue=='true'" margin="unset unset unset 2.5em">
        <wm-container name="container9_2" class="installmentScheduleLine-9_2con"></wm-container>
        <!--<wm-label padding="1em 0.5em 2em unset" name="label7" caption="Installment Schedule"></wm-label>-->
        <h4 style="font-size: 19px; font-weight: bold; margin-bottom: 18px;"><b>Installment Schedule</b></h4>
        <wm-layoutgrid name="layoutgrid5">
            <wm-gridrow name="gridrow9">
                <wm-gridcolumn columnwidth="5" name="gridcolumn17_1" horizontalalign="right">
                    <wm-table editmode="inline" name="installmentScheduleTable" title="" dataset="bind:Variables.ParrInstallmentSchedule.dataSet" navigation="Basic" on-rowupdate="installmentScheduleTableRowupdate($event, widget, row)">
                        <wm-table-column binding="sequenceId" caption="Installment ID" widget-type="label" edit-widget-type="text" type="string" readonly="true" show="true">
                            <wm-label caption="bind:row.getProperty('sequenceId')" class="" conditionalclass=""></wm-label>
                        </wm-table-column>
                        <wm-table-column binding="date" caption="Date" edit-widget-type="date" type="string" datepattern="MM/dd/yyyy" formatpattern="toDate" defaultvalue="bind:Variables.ParrInstallmentSchedule.dataSet[$i].date" show="true" editdatepattern="MM/dd/yyyy" readonly="false"></wm-table-column>
                        <wm-table-column binding="amount" caption="Installment Amt" edit-widget-type="text" type="string" datepattern="MM/dd/yyyy" formatpattern="toCurrency" currencypattern="USD" fractionsize="2" show="true" readonly="false"></wm-table-column>
                        <wm-table-column binding="rowOperations" caption="Actions" width="120px" edit-widget-type="text" type="custom" readonly="true" sortable="false" searchable="false" show="true"></wm-table-column>
                        <wm-table-row-action key="updaterow" display-name="" show="true" iconclass="wi wi-pencil fico fico-icon-pencil" title="Edit" action="editRow($event)" disabled="false" widget-type="button"></wm-table-row-action>
                    </wm-table>
                </wm-gridcolumn>
                <wm-gridcolumn columnwidth="1" name="gridcolumn24"></wm-gridcolumn>
                <wm-gridcolumn columnwidth="6" name="gridcolumn18" horizontalalign="center" style="display: flex;">
                    <wm-label padding="5px 35px 5px 5px" color="#6e6d6a" name="createParrComment" caption="Comments"></wm-label>
                    <wm-gridcolumn class="col-md-9" name="container15">
                        <wm-textarea name="Comments" textalign="left" datavalue="bind:Variables.CreatePaymentArrangement.dataSet.comment" margin="unset unset unset -0.5em" placeholder=""></wm-textarea>
                    </wm-gridcolumn>
                </wm-gridcolumn>
            </wm-gridrow>
            <wm-gridrow name="gridrow10" style="display: flex;">
                <wm-gridcolumn columnwidth="2" name="gridcolumn19" width="190px">
                    <wm-label padding="0 1em 0 0" name="AmtOverUnderTotalLabel" caption="Amt Over/Under PARR Total:" whitespace="nowrap" color="#6e6d6a"></wm-label>
                </wm-gridcolumn>
                <wm-gridcolumn columnwidth="7" name="gridcolumn21">
                    <wm-label padding="unset 0.5em" name="AmtOverUnderParrTotalValue" caption="bind:AmtOverUnder | toCurrency: '$': '2'"></wm-label>
                </wm-gridcolumn>
                <wm-gridcolumn columnwidth="3" width="100%" name="gridcolumn20" horizontalalign="right" style="text-align: right;">
                    <wm-button class="secondaryButton" caption="Cancel" type="button" margin="unset 0.5em" name="Cancel" on-click="CancelClick($event, widget)"></wm-button>
                    <!--<wm-button class="secondaryButton" caption="Clear" type="button" margin="unset 0.5em" name="ClearSchedule" on-click="Widgets.installmentScheduleTable.redraw();ClearScheduleClick($event, widget)"></wm-button>-->
                    <wm-button class="primaryButton" caption="Create PARR" type="button" margin="unset 0.5em" name="CreatePARR" on-click="CreatePARRClick($event, widget)" disabled="bind:AmtOverUnder != 0"></wm-button>
                </wm-gridcolumn>
            </wm-gridrow>
        </wm-layoutgrid>
    </wm-container>
    <wm-dialog dialogtype="design-dialog" modal="true" title="" class="newDialogSubmit" iconclass="fico-icon-check-circle fa-4x" name="createParrDialog" iconmargin="40%" showheader="true" width="26%" height="145px">
        <wm-layoutgrid name="layoutgrid9">
            <wm-gridrow name="gridrow14">
                <wm-gridcolumn columnwidth="12" name="gridcolumn31_1">
                    <wm-label padding="unset 0.5em unset unset" caption="PARR Successfully Created!" name="label31" align="center" margin="2em unset unset 7em" width="55%" height="25%"></wm-label>
                </wm-gridcolumn>
            </wm-gridrow>
        </wm-layoutgrid>
    </wm-dialog>
</wm-partial>